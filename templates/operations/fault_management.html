{% extends 'base.html' %}

{% block title %}Fault Management{% endblock %}
{% block page_title %}Fault Management{% endblock %}

{% block content %}
<!-- Add Fault Form -->
<div class="glass-card fade-up mb-3">
    <div class="card-header">
        <h3>Add New Fault Type</h3>
    </div>
    <form method="post" action="{% url 'fault_management' %}">
        {% csrf_token %}
        <div class="form-row">
            <div class="form-group">
                <label class="form-label" for="fault_name">Fault Name</label>
                <input type="text" name="fault_name" id="fault_name" class="form-control" required
                    placeholder="e.g. Power Issue, Display Problem">
            </div>
            <div class="form-group">
                <label class="form-label" for="description">Description</label>
                <input type="text" name="description" id="description" class="form-control"
                    placeholder="Optional description">
            </div>
        </div>
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">+ Add Fault</button>
        </div>
    </form>
</div>

<!-- Fault List -->
<div class="glass-card fade-up">
    <div class="card-header">
        <h3>All Fault Types</h3>
    </div>
    {% if faults %}
    <div class="table-container">
        <table class="data-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Fault Name</th>
                    <th>Description</th>
                    <th>Active</th>
                    <th>Created</th>
                </tr>
            </thead>
            <tbody>
                {% for f in faults %}
                <tr>
                    <td>{{ f.id }}</td>
                    <td class="td-bold">{{ f.fault_name }}</td>
                    <td>{{ f.description|default:"—" }}</td>
                    <td>{% if f.is_active %}<span style="color:var(--accent-emerald);">● Active</span>{% else %}<span
                            style="color:var(--accent-rose);">● Inactive</span>{% endif %}</td>
                    <td>{{ f.created_at|date:"d M Y" }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-icon">⚡</div>
        <p>No fault types yet. Add your first fault type above.</p>
    </div>
    {% endif %}
</div>
{% endblock %}